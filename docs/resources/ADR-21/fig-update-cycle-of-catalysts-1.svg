<svg xmlns="http://www.w3.org/2000/svg" width="1282" height="332" x-original-source="participant ci participant SNS (global and public) as sns participant SQS (one per deployment) as sqs participant EC2 (one per deployment) as ec2 ci-&gt;sns: new version published (using aws cli) sns-&gt;sqs: aws.sns.TopicSubscription ec2-&gt;ec2: cron (aws sqs receive-message) sqs--&gt;ec2: message ec2-&gt;ec2: ./init.sh ec2--&gt;sqs: delete-message (if succeed)"><defs><marker id="markerArrowBlock" markerHeight="5" markerWidth="5" orient="auto" refX="5" refY="2.5" viewBox="0 0 5 5"><path d="M 0 0 L 5 2.5 L 0 5 z"/></marker><marker id="markerArrowOpen" markerHeight="16" markerWidth="4" orient="auto" refX="9.6" refY="8" viewBox="0 0 9.6 16"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"/></marker></defs><rect width="37" height="35" x="10" y="10" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="20" y="33" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="20" y="33">ci</tspan></text><rect width="37" height="35" x="10" y="267" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="20" y="290" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="20" y="290">ci</tspan></text><line x1="28" x2="28" y1="45" y2="267" fill="none" stroke="#000" style="stroke-width:2px"/><rect width="214" height="35" x="254" y="10" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="264" y="35" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="264" y="35">SNS (global and public)</tspan></text><rect width="214" height="35" x="254" y="267" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="264" y="292" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="264" y="292">SNS (global and public)</tspan></text><line x1="361" x2="361" y1="45" y2="267" fill="none" stroke="#000" style="stroke-width:2px"/><rect width="223" height="35" x="488" y="10" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="498" y="35" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="498" y="35">SQS (one per deployment)</tspan></text><rect width="223" height="35" x="488" y="267" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="498" y="292" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="498" y="292">SQS (one per deployment)</tspan></text><line x1="599" x2="599" y1="45" y2="267" fill="none" stroke="#000" style="stroke-width:2px"/><rect width="223" height="35" x="736" y="10" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="746" y="35" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="746" y="35">EC2 (one per deployment)</tspan></text><rect width="223" height="35" x="736" y="267" fill="#fff" stroke="#000" style="stroke-width:2px"/><text x="746" y="292" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="746" y="292">EC2 (one per deployment)</tspan></text><line x1="847" x2="847" y1="45" y2="267" fill="none" stroke="#000" style="stroke-width:2px"/><text x="38" y="80" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="38" y="80">new version published (using aws cli)</tspan></text><line x1="28" x2="361" y1="85" y2="85" fill="none" stroke="#000" marker-end="url(#markerArrowBlock)" style="stroke-width:2px"/><text x="374" y="114" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="374" y="114">aws.sns.TopicSubscription</tspan></text><line x1="361" x2="599" y1="119" y2="119" fill="none" stroke="#000" marker-end="url(#markerArrowBlock)" style="stroke-width:2px"/><line x1="847" x2="867" y1="134" y2="134" fill="none" stroke="#000" style="stroke-width:2px"/><line x1="867" x2="867" y1="134" y2="154" fill="none" stroke="#000" style="stroke-width:2px"/><line x1="867" x2="847" y1="154" y2="154" fill="none" stroke="#000" marker-end="url(#markerArrowBlock)" style="stroke-width:2px"/><text x="872" y="151" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="872" y="151">cron (aws sqs receive-message)</tspan></text><text x="693" y="180" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="693" y="180">message</tspan></text><line x1="599" x2="847" y1="185" y2="185" fill="none" stroke="#000" stroke-dasharray="6 2" marker-end="url(#markerArrowBlock)" style="stroke-width:2px"/><line x1="847" x2="867" y1="200" y2="200" fill="none" stroke="#000" style="stroke-width:2px"/><line x1="867" x2="867" y1="200" y2="217" fill="none" stroke="#000" style="stroke-width:2px"/><line x1="867" x2="847" y1="217" y2="217" fill="none" stroke="#000" marker-end="url(#markerArrowBlock)" style="stroke-width:2px"/><text x="872" y="214" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="872" y="214">./init.sh</tspan></text><text x="609" y="247" text-anchor="start" style="font:14px Menlo,Monaco,&quot;Courier New&quot;,monospace"><tspan x="609" y="247">delete-message (if succeed)</tspan></text><line x1="847" x2="599" y1="252" y2="252" fill="none" stroke="#000" stroke-dasharray="6 2" marker-end="url(#markerArrowBlock)" style="stroke-width:2px"/></svg>